<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>PolyWizz</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="../static/plugins/fontawesome-free/css/all.min.css" />
    <!-- Ionicons -->
    <link
      rel="stylesheet"
      href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"
    />
    <!-- Theme style -->
    <link rel="stylesheet" href="../static/css/adminlte.min.css" />
  
    <!-- Google Font: Source Sans Pro -->

    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="../static/css/pdfannotate.css">
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
      rel="stylesheet"
    />

  

    <style>
      #drag-1,
      #drag-2 {
        width: 30%;

        /* margin: 1rem 0 0 1rem; */
        background-color: transparent;
        color: white;
        border-radius: 0.75em;
        padding: 4%;
        touch-action: none;
        user-select: none;
        transform: translate(0px, 0px);
      }

      .draggable input {
        border: none;
        background-color: transparent;
      
        display: flex;
        border-radius: 0px;
        font-size:14px;
        color:black;
      
      }

      .draggable input::placeholder {
       
        color:black;
      
      }

      .draggable input:focus {
        background-color: transparent;
      }

      
      .drag{
          position:relative;
      }

      #drag-1{
          position: absolute;
          right:0;
          top:80px;
      }

      .text{
          position: absolute;
          width:350px;
          background-color: black;
          color: white;
          padding:0.3em;
          right:0;
          top:0;
      }

      #drag-2{
          position: absolute;
          right:0;
          top:40px;
      }

      #drag-1{
          position: absolute;
          right:0;
          top:120px;
      }

    
    </style>

   
  </head>
  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#"
              ><i class="fas fa-bars"></i
            ></a>
          </li>
          <li class="nav-item d-none d-sm-inline-block">
            <a href="./Dashboard.html" class="nav-link">Home</a>
          </li>
        </ul>

        <!-- SEARCH FORM -->
        <form class="form-inline ml-3">
          <div class="input-group input-group-sm">
            <input
              class="form-control form-control-navbar"
              type="search"
              placeholder="Search"
              aria-label="Search"
            />
            <div class="input-group-append">
              <button class="btn btn-navbar" type="submit">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
        </form>
      </nav>
      <!-- /.navbar -->

      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        

    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Sidebar user panel (optional) -->
      <div class="user-panel mt-3 pb-3 mb-3 d-flex ml-2">
        <div class="info">
          <strong><a href="#" class="d-block">Firstname Lastname</a></strong>
        </div>
      </div>

      <!-- Sidebar Menu -->
      <nav class="mt-2">
        <ul
          class="nav nav-pills nav-sidebar flex-column"
          data-widget="treeview"
          role="menu"
          data-accordion="false"
        >
         

          

          <li class="nav-item pt-3">
            <a href="{{ url_for('main.getFile') }}" class="nav-link">
              <i class="fa fa-plus nav-icon"></i>
              <p>Add New Document</p>
            </a>
          </li>

          <li class="nav-item pt-3">
            <a href="{{ url_for('main.uploadForClient') }}" class="nav-link">
              <i class="fa fa-plus nav-icon"></i>
              <p>Upload Created Doc(Agent)</p>
            </a>
          </li>
          <!-- <li class="nav-item pt-3">
            <a href="create.html" class="nav-link">
              <i class="fa fa-file nav-icon"></i>
              <p>Create New PDF Form</p>
            </a>
          </li> -->


          <li class="nav-item has-treeview pt-3">
            <a href="#" class="nav-link">
              <i class="nav-icon fa fa-history"></i>
              <p>
                History
                <i class="fas fa-angle-left right"></i>
              </p>
            </a>
            <ul class="nav nav-treeview">
              <li class="nav-item">
                <a href="{{ url_for('main.processHistory') }}" class="nav-link">
                  <i class="fa fa-tasks nav-icon"></i>
                  <p>In Process</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="{{ url_for('main.allHistory') }}" class="nav-link">
                  <i class="fa fa-history nav-icon"></i>
                  <p>All History</p>
                </a>
              </li>

             
            </ul>
          </li>

          <li class="nav-item pt-3">
            <a href="logout.html" class="nav-link">
              <i class="fa fa-power-off nav-icon"></i>
              <p>Logout</p>
            </a>
          </li>
        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
  </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
       

        <!-- Main content -->
        <section class="content">
          <div class="row">
            <div class="col-md-12 d-flex">
              <div class="col-md-10">
                
                  <div id="pdf-container"></div>
              </div>

              <div class="col-md-2">
                <div class="toolbar">
               
                  <div class="tool">
                    <label for="">Brush size</label>
                    <input type="number" class="form-control text-right" value="1" id="brush-size" max="50">
                  </div>
                  <div class="tool">
                    <label for="">Font size</label>
                    <select id="font-size" class="form-control">
                      <option value="10">10</option>
                      <option value="12">12</option>
                      <option value="16" selected>16</option>
                      <option value="18">18</option>
                      <option value="24">24</option>
                      <option value="32">32</option>
                      <option value="48">48</option>
                      <option value="64">64</option>
                      <option value="72">72</option>
                      <option value="108">108</option>
                    </select>
                  </div>
                  <div class="tool">
                    <button class="color-tool active" style="background-color: #212121;"></button>
                    <button class="color-tool" style="background-color: red;"></button>
                    <button class="color-tool" style="background-color: blue;"></button>
                    <button class="color-tool" style="background-color: green;"></button>
                    <button class="color-tool" style="background-color: yellow;"></button>
                  </div>
                  <div class="tool">
                    <button class="tool-button active"><i class="fa fa-hand-paper-o" title="Free Hand" onclick="enableSelector(event)"></i></button>
                  </div>
                  <div class="tool">
                    <button class="tool-button"><i class="fa fa-pencil" title="Pencil" onclick="enablePencil(event)"></i></button>
                  </div>
                  <div class="tool">
                    <button class="tool-button"><i class="fa fa-font" title="Add Text" onclick="enableAddText(event)"></i></button>
                  </div>
                
                  <div class="tool">
                    <button class="tool-button"><i class="fa fa-long-arrow-right" title="Add Arrow" onclick="enableAddArrow(event)"></i></button>
                  </div>
                  <!-- <div class="tool">
                    <button class="tool-button"><i class="fa fa-square-o" title="Add rectangle" onclick="enableRectangle(event)"></i></button>
                  </div> -->
                  <div class="tool">
                    <button class="tool-button"><i class="" title="Insert Line" onclick="enableLine(event)">__</i></button>
                  </div>
                  <div class="tool">
                    <button class="tool-button"><i class="fa fa-picture-o" title="Add an Image" onclick="addImage(event)"></i></button>
                  </div>
                  <div class="tool">
                    <button class="btn btn-danger btn-sm" onclick="deleteSelectedObject(event)"><i class="fa fa-trash"></i></button>
                  </div>
                  <div class="tool">
                    <button class="btn btn-danger btn-sm" onclick="clearPage()">Clear Page</button>
                  </div>
                  <div class="tool">
                    <button class="btn btn-info btn-sm" onclick="showPdfData()">{}</button>
                  </div>
                  <div class="tool">
                    <button class="btn btn-light btn-sm" onclick="savePDF()" id="downloadButton"><i class="fa fa-save"></i> Save</button>
                  
                  </div>
                </div>
              </div>
              
              
              <div class="modal fade" id="dataModal" tabindex="-1" role="dialog" aria-labelledby="dataModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="dataModalLabel">PDF annotation data</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <pre class="prettyprint lang-json linenums">
                      </pre>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <!-- /.col-->
          </div>
          <!-- ./row -->
        </section>
        <!-- /.content -->
      </div>
      <!-- /.content-wrapper -->
      <footer class="main-footer"></footer>
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="../static/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../static/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../static/js/demo.js"></script>
  

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.min.js"></script>
<script> pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js';</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.3.0/fabric.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.2.0/jspdf.umd.min.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script src="../static/js/arrow.fabric.js"></script>
<script src="../static/js/pdfannotate.js"></script>
<script src="../static/js/script.js"></script>
<script type="text/javascript">
    var documentName = "{{ imagePdf }}"

    var pdf = new PDFAnnotate("pdf-container", `../static/images/${documentName}`, {
  onPageUpdated(page, oldData, newData) {
    console.log(page, oldData, newData);
  },
  ready() {
    console.log("Plugin initialized successfully");
  },
  scale: 1.4,
  pageImageCompression: "MEDIUM", // FAST, MEDIUM, SLOW(Helps to control the new PDF file size)
});

function changeActiveTool(event) {
    var element = $(event.target).hasClass("tool-button")
      ? $(event.target)
      : $(event.target).parents(".tool-button").first();
    $(".tool-button.active").removeClass("active");
    $(element).addClass("active");
}

function enableSelector(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.enableSelector();
}

function enablePencil(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.enablePencil();
}

function enableAddText(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.setColor('rgb(0, 0, 0)');
    pdf.enableAddText();
}

function enableAddArrow(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.enableAddArrow();
}

function addImage(event) {
    event.preventDefault();
    pdf.addImageToCanvas()
}

function enableRectangle(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.setColor('rgba(255, 255, 255,0.1)');
    pdf.setBorderColor('#000');
    pdf.enableRectangle();
}

function deleteSelectedObject(event) {
  event.preventDefault();
  pdf.deleteSelectedObject();
}

function savePDF() {
    // pdf.savePdf();
    pdf.savePdf('polywizz.pdf'); // save with given file name
    
}

function clearPage() {
    pdf.clearActivePage();
}

function showPdfData() {
    var string = pdf.serializePdf();
    $('#dataModal .modal-body pre').first().text(string);
    PR.prettyPrint();
    $('#dataModal').modal('show');
}

$(function () {
    $('.color-tool').click(function () {
        $('.color-tool.active').removeClass('active');
        $(this).addClass('active');
        color = $(this).get(0).style.backgroundColor;
        pdf.setColor(color);
    });

    $('#brush-size').change(function () {
        var width = $(this).val();
        pdf.setBrushSize(width);
    });

    $('#font-size').change(function () {
        var font_size = $(this).val();
        pdf.setFontSize(font_size);
    });
});

function enableLine(event) {
    event.preventDefault();
    changeActiveTool(event);
    pdf.setColor('rgba(255, 255, 255,0.1)');
    pdf.setBorderColor('#000');
   
    pdf.enableLine();
}

</script>

<script type="text/javascript">


  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36251023-1']);
  _gaq.push(['_setDomainName', 'jqueryscript.net']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    
  </body>
</html>
